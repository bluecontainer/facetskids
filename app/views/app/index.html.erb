<div class="snap-drawers hidden">
  <div>
    <div class="detailContainer">
      <div onclick="snapper.close();" style="width: 288px; height: 25px; margin: 5px 9px 0px 9px; text-align: right;">
        <i class="icon-cancel-squared" style="font-size: 28px; line-height: 1px;"></i>
      </div>
      <a href="" ng-click="result.playVideo(result.selected_video);"><img ng-src="{{result.selected_video.thumbnails[0]}}" style="width: 288px; height: 215px; margin: 5px 9px 0px 9px;"/></a>

      <div class="hilight">
        {{result.selected_video.name}}
      </div>
      <div style="margin: 5px 9px 10px 9px;">
        <span ng-if="result.selected_video.origin_country.length > 0">{{result.selected_video.origin_country[0]}}</span>
        <span style="font-weight: bold; margin-left: 10px;">{{result.selected_video.released_year}}</span>
        <span ng-if="result.selected_video.audio_language.length > 0" style="margin-left: 10px">{{result.selected_video.audio_language[0]}}</span>
        <br>
        <span style="font-weight: bold">Ages: {{result.selected_video.age_range}}</span>
        <br>
        <table style="width:100%;align-self: center; text-align: center;" ng-if="result.selected_video.supporting_roles.length>0">
          <tr>
            <th style="text-align: center">Person:</th>
            <th style="text-align: center">Role:</th>
          </tr>
          <tr ng-repeat="person in result.selected_video.supporting_roles">
            <td>{{person.name}}</td>
            <td>{{person.role}}</td>
          </tr>
        </table>
      </div>
      <div style="margin: 5px 9px 0px 9px; height: 95px; width: 288px;" class="scrollable">
        <div ng-bind-html="result.selected_video.description">
        </div>
      </div>
    </div>
    <div class="ratingContainer">
      <div class="ratingTitle">
        Rate It
        <rating value="selected.user_rating" max="5" readonly="false" state-on="'entypo-star'" state-off="'entypo-star-empty'"></rating>
      </div>
    </div>
    <div class="tagTitle">
      Did this make you...
    </div>
    <div class="tagContainer" svgbuttongroup tag-list="selected.user_emotion_list" multiple="true">
      <svgbutton src="<%= image_path('happy.svg') %>" value="happy"></svgbutton>
      <svgbutton src="<%= image_path('excited.svg') %>" value="excited"></svgbutton>
      <svgbutton src="<%= image_path('scared.svg') %>" value="scared"></svgbutton>
      <svgbutton src="<%= image_path('think.svg') %>" value="think"></svgbutton>
      <svgbutton src="<%= image_path('laugh.svg') %>" value="laugh"></svgbutton>
      <svgbutton src="<%= image_path('care.svg') %>" value="care"></svgbutton>
    </div>

  </div>
  <div class="snap-drawer snap-drawer-right"></div>
</div>


<div id="content" class="snap-content iosSliderVertical" iosvslider>

  <div class='slider'>

    <div ng-if="selected.emotion.length == 0">
      <div ng-repeat="tag in result.curated_tag_list" ng-class-odd="'iosSliderColorOdd'" ng-class-even="'iosSliderColorEven'">
        <div class="slide" vslide>
          <div class="listTitle">{{tag.label}}</div>
          <div class="iosSlider" iosslider data-snap-ignore="true">
            <div class="slider">
              <div class="slide" slide ng-repeat="video in result.videos[tag.name]">
                <div video-thumbnail="video"></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div ng-if="selected.emotion.length > 0">
      <div class="slide" vslide>
        <div id="wrapper" class="imageContainer">
          <div ng-repeat="video in result.videos[selected.emotion[0]]" repeat-last-notifier data-snap-ignore="true">
            <div video-thumbnail="video"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>

<videoplayer src="result.play_video"></videoplayer>
<%= javascript_include_tag "move" %>
<script type="text/javascript">
    var snapper = new Snap({
        element: document.getElementById('content'),
        maxPosition: 306,
        disable: 'right',
        hyperextensible: false
    });

    snapper.on("open",function(){
        $("div.snap-drawers").toggleClass("hidden",100);
    });

    snapper.on("close",function(){
        $("div.snap-drawers").toggleClass("hidden",100);
    })

    $(document).on('touchmove', function (e) {
        if (!$('.scrollable').has($(e.target)).length)
            e.preventDefault();
    });

    $(function () {
        FastClick.attach(document.body);
    });
</script>


